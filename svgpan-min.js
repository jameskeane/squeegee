/*! 
 * SVGPan 0.0.1 (custom build from source) 
 */ 
(function(f,l,g){var e="mousewheel",h="number",b=true,a=false;if(!f.SVGPan)f.SVGPan={};var j=f.SVGPan,d=j.Config;(function(){if(d)return;d=j.Config={debugMode:a,animationTime:1.5,logarithmicZoom:b,springStiffness:5,zoomPerClick:2,zoomPerScroll:g.pow(2,1/3),zoomPerSecond:2}})();var k=j.Spring=function(k){var c=this,e=typeof k==h?k:0,f=e,b=e,a=(new Date).getTime(),j=a,i=a;function l(b){var a=d.springStiffness;return (1-g.exp(-b*a))/(1-g.exp(-a))}c.getCurrent=function(){return e};c.getTarget=function(){return b};c.resetTo=function(c){b=c;i=a;f=b;j=i};c.springTo=function(c){f=e;j=a;b=c;i=j+1e3*d.animationTime};c.shiftBy=function(a){f+=a;b+=a};c.update=function(){a=(new Date).getTime();e=a>=i?b:f+(b-f)*l((a-j)/(i-j))}},c=function(){var d="DOMMouseScroll",c=this,j=c;(function(){})();c.getElement=function(a){if(typeof a=="string")a=l.getElementById(a);return a};c.getEvent=function(a){return a?a:f.event};c.getEventPoint=function(b){var a=l.documentElement.createSVGPoint();a.x=b.clientX;a.y=b.clientY;return a};c.setCTM=function(b,a){var c="matrix("+a.a+","+a.b+","+a.c+","+a.d+","+a.e+","+a.f+")";b.setAttribute("transform",c)};c.dumpMatrix=function(b){var a=", ",c="[ "+b.a+a+b.c+a+b.e+"\n  "+b.b+a+b.d+a+b.f+"\n  0, 0, 1 ]";return c};c.setAttributes=function(b,a){for(i in a)b.setAttributeNS(null,i,a[i])};c.getMouseScroll=function(b){var b=j.getEvent(b),a=0;if(typeof b.wheelDelta==h)a=b.wheelDelta;else if(typeof b.detail==h)a=b.detail*-1;return a?a/g.abs(a):0};c.addEvent=function(a,c,f,b){var a=j.getElement(a);if(a.addEventListener){c==e&&a.addEventListener(d,f,b);a.addEventListener(c,f,b)}else if(a.attachEvent){a.attachEvent("on"+c,f);b&&a.setCapture&&a.setCapture()}};c.removeEvent=function(a,c,f,b){var a=j.getElement(a);if(a.removeEventListener){c==e&&a.removeEventListener(d,f,b);a.removeEventListener(c,f,b)}else if(a.detachEvent){a.detachEvent("on"+c,f);b&&a.releaseCapture&&a.releaseCapture()}};c.cancelEvent=function(c){var c=j.getEvent(c);c.preventDefault&&c.preventDefault();c.cancel=b;c.returnValue=a};c.stopEvent=function(a){var a=j.getEvent(a);a.stopPropagation&&a.stopPropagation();a.cancelBubble=b}};c=j.Utils=new c;var m;(function(){m=j.Viewer=function(z){var I=this,m=c.getElement(z),n=l.documentElement,p=a,H=a,o=a,G,q;stateTf=m.getCTM().inverse();var i=new k(0),j=new k(0),h=new k(d.logarithmicZoom?0:1),r,F=g.LN2;function y(){c.addEvent(n,"mouseup",A,a);c.addEvent(n,"mousedown",w,a);c.addEvent(n,"mousemove",x,a);c.addEvent(n,e,v,a);C()}function s(a){return g.log(a)/F}function t(a){return g.pow(2,a)}function B(b){var a;if(b){a=h.getCurrent();return d.logarithmicZoom?t(a):a}else{a=h.getTarget();return d.logarithmicZoom?t(a):a}}function u(c,a){if(o)return f.setTimeout(c,1);var b=(new Date).getTime(),a=a?a:b,d=a+1e3/60,e=g.max(1,d-b);return f.setTimeout(c,e)}function C(){var k=(new Date).getTime(),d=h.getCurrent(),e=i.getCurrent(),f=j.getCurrent();h.update();if(h.getCurrent()!=d){var b=r.matrixTransform(m.getCTM().inverse()),l=h.getCurrent()-d,p=1+l,g=n.createSVGMatrix().translate(b.x,b.y).scale(p).translate(-b.x,-b.y);c.setCTM(m,m.getCTM().multiply(g));stateTf=stateTf.multiply(g.inverse())}i.update();j.update();i.getCurrent()!=e|j.getCurrent()!=f&&c.setCTM(m,stateTf.inverse().translate(i.getCurrent(),j.getCurrent()));if(h.getCurrent()==d&i.getCurrent()==e&j.getCurrent()==f)o=a;u(arguments.callee,k)}function D(c,b,a){E(B()*c,b,a)}function E(a,e,c){o=b;if(c)h.resetTo(d.logarithmicZoom?s(a):a);else h.springTo(d.logarithmicZoom?s(a):a);r=e}function A(){p=a}function w(a){if(!p){stateTf=m.getCTM().inverse();q=c.getEventPoint(a).matrixTransform(stateTf);i.resetTo(0);j.resetTo(0)}p=b;o=b}function x(d){if(p==b){var a=c.getEventPoint(d).matrixTransform(stateTf);i.springTo(a.x-q.x);j.springTo(a.y-q.y)}}function v(b){var f=c.getMouseScroll(b),h=c.getEventPoint(b),e=g.pow(d.zoomPerScroll,f);D(e,h,a);c.cancelEvent(b)}y()}})();func=function(){new j.Viewer(c.getElement("viewport"))};if(f.addEventListener)f.addEventListener("load",func,a);else elem.attachEvent&&f.attachEvent("onload",func)})(window,document,Math);